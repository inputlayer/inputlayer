// Test: Session rule with self-join
// Description: Ephemeral rule that joins a relation with itself

.kg create test_sess_selfjoin_n04t44
.kg use test_sess_selfjoin_n04t44

+friend[(1, 2), (2, 3), (3, 1), (1, 3)]

// Session rule: find mutual friends (A-B and B-A both exist)
mutual(A, B) <- friend(A, B), friend(B, A), A < B
?mutual(A, B)

.session clear

.kg use default
.kg drop test_sess_selfjoin_n04t44
