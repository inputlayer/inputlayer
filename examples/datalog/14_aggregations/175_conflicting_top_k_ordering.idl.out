Connecting to server at http://127.0.0.1:8080...
Connected!

Server status: healthy
Current knowledge graph: default

> .kg create test_conflict_topk_n14t175
Knowledge graph 'test_conflict_topk_n14t175' created.
Switched to knowledge graph: test_conflict_topk_n14t175
> .kg use test_conflict_topk_n14t175
Switched to knowledge graph: test_conflict_topk_n14t175
> +scores[("Math", "Alice", 95), ("Math", "Bob", 87), ("Math", "Carol", 92), ("Science", "Dave", 88), ("Science", "Eve", 91), ("Science", "Frank", 85)]
Inserted 6 fact(s) into 'scores'.
> +top2_by_subject(Subj, top_k<2, Name, Score:desc>) <- scores(Subj, Name, Score)
Rule 'top2_by_subject' registered.
> ?top2_by_subject(S, N, Sc)
┌───────────┬─────────┬──────┐
│ col0      │ col1    │ col2 │
├───────────┼─────────┼──────┤
│ "Math"    │ "Alice" │   95 │
│ "Math"    │ "Carol" │   92 │
│ "Science" │ "Dave"  │   88 │
│ "Science" │ "Eve"   │   91 │
└───────────┴─────────┴──────┘
4 rows
> +top2_by_subject(Subj, top_k<2, Name, Score:desc>) <- scores(Subj, Name, Score)
Rule 'top2_by_subject' registered.
> ?top2_by_subject(S, N, Sc)
┌───────────┬─────────┬──────┐
│ col0      │ col1    │ col2 │
├───────────┼─────────┼──────┤
│ "Math"    │ "Alice" │   95 │
│ "Math"    │ "Carol" │   92 │
│ "Science" │ "Dave"  │   88 │
│ "Science" │ "Eve"   │   91 │
└───────────┴─────────┴──────┘
4 rows
> +top2_by_subject(Subj, top_k<2, Name, Score:asc>) <- scores(Subj, Name, Score)
Script error: Failed to register rule: Conflicting aggregation: cannot add clause with 'top_k<2, Name, Score:asc>' to rule 'top2_by_subject' which already has a clause with 'top_k<2, Name, Score:desc>'. Drop the rule first with '.rule drop top2_by_subject' and re-create it.
