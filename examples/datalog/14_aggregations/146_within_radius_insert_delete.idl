// Test: Within radius with mixed insert/delete
// Description: Tests within_radius as items move in and out of range

.kg create test_radius_mixed_n14t146
.kg use test_radius_mixed_n14t146

+point[(1, 0.1), (2, 0.5), (3, 1.5)]

+nearby(within_radius<1.0, Id, D:asc>) <- point(Id, D)

// Initial: 1(0.1), 2(0.5) â€” 3(1.5) is outside
?nearby(X, Y)

// Move point 3 within radius
-point(3, 1.5)
+point[(3, 0.8)]

// Now all 3 should be in range
?nearby(X, Y)

// Move point 1 out of radius
-point(1, 0.1)
+point[(1, 2.0)]

// Now: 2(0.5), 3(0.8)
?nearby(X, Y)

// Delete all points
-point(2, 0.5)
-point(3, 0.8)
-point(1, 2.0)

?nearby(X, Y)

.kg use default
.kg drop test_radius_mixed_n14t146
