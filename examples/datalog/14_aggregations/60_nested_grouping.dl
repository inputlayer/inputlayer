% Test: Aggregation with deep grouping

.kg create test_nested_grp_n14t60
.kg use test_nested_grp_n14t60

+sales[("2024", "Q1", "A", 100), ("2024", "Q1", "B", 150), ("2024", "Q2", "A", 200), ("2025", "Q1", "A", 300)].

% Sum by year, quarter, category
sum_by_all(Year, Qtr, Cat, sum<Val>) :- sales(Year, Qtr, Cat, Val).

?- sum_by_all(Year, Qtr, Cat, Total).

.kg use default
.kg drop test_nested_grp_n14t60
