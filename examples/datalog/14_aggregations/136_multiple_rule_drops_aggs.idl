// Test: Multiple rule drops across different aggregation types
// Description: Tests dropping multiple aggregation rules in sequence

.kg create test_multi_drop_n14t136
.kg use test_multi_drop_n14t136

+data[(1, 10), (1, 20), (2, 30), (2, 40)]

+total(Grp, sum<V>) <- data(Grp, V)
+cnt(Grp, count<V>) <- data(Grp, V)
+lo(Grp, min<V>) <- data(Grp, V)
+hi(Grp, max<V>) <- data(Grp, V)
+av(Grp, avg<V>) <- data(Grp, V)
+top(Grp, top_k<1, V:desc>) <- data(Grp, V)

?total(X, Y)
?cnt(X, Y)
?lo(X, Y)
?hi(X, Y)
?av(X, Y)
?top(X, Y)

// Drop them all one by one
.rule drop total
.rule drop cnt
.rule drop lo
.rule drop hi
.rule drop av
.rule drop top

?total(X, Y)
?cnt(X, Y)
?lo(X, Y)
?hi(X, Y)
?av(X, Y)
?top(X, Y)

.kg use default
.kg drop test_multi_drop_n14t136
