// Test: Retract all base facts from top_k
// Description: Tests behavior when all facts feeding a top_k rule are retracted

.kg create test_retract_all_topk_n14t135
.kg use test_retract_all_topk_n14t135

+score[(1, 100), (2, 200), (3, 300)]

+top(top_k<2, Player, Points:desc>) <- score(Player, Points)

?top(X, Y)

// Retract all
-score(1, 100)
-score(2, 200)
-score(3, 300)

?top(X, Y)

// Re-add
+score[(4, 400), (5, 500)]

?top(X, Y)

.kg use default
.kg drop test_retract_all_topk_n14t135
