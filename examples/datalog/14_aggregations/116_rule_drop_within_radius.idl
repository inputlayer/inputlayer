// Test: Rule drop with within_radius aggregation
// Description: Tests dropping and re-adding a within_radius rule

.kg create test_drop_radius_n14t116
.kg use test_drop_radius_n14t116

+dist[(1, 0.1), (2, 0.5), (3, 1.2), (4, 0.3), (5, 2.0), (6, 0.45)]

// All items within radius 0.5
+nearby(within_radius<0.5, Id, D:asc>) <- dist(Id, D)

?nearby(X, Y)

// Drop the rule
.rule drop nearby

?nearby(X, Y)

// Redefine with a larger radius
+nearby(within_radius<1.5, Id, D:asc>) <- dist(Id, D)

?nearby(X, Y)

.kg use default
.kg drop test_drop_radius_n14t116
