Connecting to server at http://127.0.0.1:8080...
Connected!

Server status: healthy
Authenticated as: admin
Current knowledge graph: default

> .kg create test_stratification_n08t28
Knowledge graph 'test_stratification_n08t28' created.
Switched to knowledge graph: test_stratification_n08t28
> .kg use test_stratification_n08t28
Switched to knowledge graph: test_stratification_n08t28
> +all_items[(1), (2), (3), (4), (5)]
Inserted 5 fact(s) into 'all_items'.
> +selected[(1), (3), (5)]
Inserted 3 fact(s) into 'selected'.
> +not_selected(X) <- all_items(X), !selected(X)
Rule 'not_selected' registered.
> ?not_selected(X)
┌───┐
│ X │
├───┤
│ 2 │
│ 4 │
└───┘
2 rows
> +base_set[(1), (2), (3)]
Inserted 3 fact(s) into 'base_set'.
> +exclude1[(1)]
Inserted 1 fact(s) into 'exclude1'.
> +exclude2[(2)]
Inserted 1 fact(s) into 'exclude2'.
> +remaining(X) <- base_set(X), !exclude1(X), !exclude2(X)
Rule 'remaining' registered.
> ?remaining(X)
┌───┐
│ X │
├───┤
│ 3 │
└───┘
1 rows
> +universe[(1), (2), (3), (4), (5), (6)]
Inserted 6 fact(s) into 'universe'.
> +layer1_exclude[(1), (2)]
Inserted 2 fact(s) into 'layer1_exclude'.
> +layer1_result(X) <- universe(X), !layer1_exclude(X)
Rule 'layer1_result' registered.
> +layer2_exclude(X) <- layer1_result(X), X < 5
Rule 'layer2_exclude' registered.
> +layer2_result(X) <- layer1_result(X), !layer2_exclude(X)
Rule 'layer2_result' registered.
> ?layer1_result(X)
┌───┐
│ X │
├───┤
│ 3 │
│ 4 │
│ 5 │
│ 6 │
└───┘
4 rows
> ?layer2_result(X)
┌───┐
│ X │
├───┤
│ 5 │
│ 6 │
└───┘
2 rows
> .kg use default
Switched to knowledge graph: default
> .kg drop test_stratification_n08t28
Knowledge graph 'test_stratification_n08t28' dropped.
