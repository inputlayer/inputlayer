
Executing script: /Users/samuel.picek/InputLayer/FlowLog/course/final-project/examples/datalog/18_advanced_patterns/11_recursion_arithmetic_agg.dl

> .db create test_rec_arith_agg
Database 'test_rec_arith_agg' created.
Switched to database: test_rec_arith_agg
> .db use test_rec_arith_agg
Switched to database: test_rec_arith_agg
> +edge[(1, 2, 10), (2, 3, 20), (3, 4, 15), (1, 3, 50), (2, 4, 25)].
Inserted 5 facts into 'edge'.
> view path_weight(X: int, Y: int, W: int) :- edge(X, Y, W).
View 'path_weight' registered.
> view path_weight(X: int, Z: int, W1+W2: int) :- path_weight(X, Y, W1), edge(Y, Z, W2).
Rule added to view 'path_weight' (2 rules total).
> ?- path_weight(X, Y, W).
10 rows:
  (1, 2, 10)
  (1, 3, 30)
  (1, 3, 50)
  (1, 4, 35)
  (1, 4, 45)
  (1, 4, 65)
  (2, 3, 20)
  (2, 4, 25)
  (2, 4, 35)
  (3, 4, 15)
> view min_path(X: int, Y: int, min<W>: int) :- path_weight(X, Y, W).
View 'min_path' registered.
> ?- min_path(X, Y, W).
6 rows:
  (1, 2, 10)
  (1, 3, 30)
  (1, 4, 35)
  (2, 3, 20)
  (2, 4, 25)
  (3, 4, 15)
> view path_count(X: int, Y: int, count<W>: int) :- path_weight(X, Y, W).
View 'path_count' registered.
> ?- path_count(X, Y, C).
6 rows:
  (1, 2, 1)
  (1, 3, 2)
  (1, 4, 3)
  (2, 3, 1)
  (2, 4, 2)
  (3, 4, 1)
> view total_from_1(sum<W>: int) :- path_weight(1, _, W).
View 'total_from_1' registered.
> ?- total_from_1(T).
1 rows:
  (235)
> view avg_from_1(avg<W>: int) :- path_weight(1, _, W).
View 'avg_from_1' registered.
> ?- avg_from_1(A).
No results.
> .db use default
Switched to database: default
> .db drop test_rec_arith_agg
Database 'test_rec_arith_agg' dropped.

