// Test: Rank simulation pattern

.kg create test_rank_n18t122
.kg use test_rank_n18t122

+scores[(1, 95), (2, 87), (3, 92), (4, 87)]

// Count how many have higher score (rank-1)
+rank(Id, Score, count<OtherId>) <- scores(Id, Score), scores(OtherId, OtherScore), OtherScore > Score

?rank(Id, Score, R)

.kg use default
.kg drop test_rank_n18t122
