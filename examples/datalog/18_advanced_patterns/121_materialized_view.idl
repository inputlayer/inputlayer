// Test: Materialized view pattern

.kg create test_mat_view_n18t121
.kg use test_mat_view_n18t121

+orders[(1, 100, "2024-01"), (2, 200, "2024-01"), (3, 150, "2024-02")]

// Materialized summary (persistent rule)
+monthly_total(Month, sum<Amount>) <- orders(_, Amount, Month)

?monthly_total(M, T)

.kg use default
.kg drop test_mat_view_n18t121
