% Test: Bill of materials pattern

.kg create test_bom_n18t36
.kg use test_bom_n18t36

+component[("car", "engine", 1), ("car", "wheel", 4), ("engine", "piston", 4), ("engine", "sparkplug", 4)].

% All parts needed (recursive)
+all_parts(Product, Part, Qty) :- component(Product, Part, Qty).
+all_parts(Product, SubPart, TotalQty) :- component(Product, Part, Q1), all_parts(Part, SubPart, Q2), TotalQty = Q1 * Q2.

?- all_parts("car", Part, Qty).

.kg use default
.kg drop test_bom_n18t36
