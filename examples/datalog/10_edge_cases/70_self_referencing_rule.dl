% Test: Self-referencing in rule body
% Expected: Handle self-loops correctly
% Category: 10_edge_cases
% Priority: P2 - Edge cases

.kg create test_self_ref
.kg use test_self_ref

+graph[("a", "a"), ("a", "b"), ("b", "c"), ("c", "c")].

% Find nodes with self-loops
has_self_loop(X) :- graph(X, X).

% Find nodes without self-loops
no_self_loop(X) :- graph(X, _), !has_self_loop(X).

?- has_self_loop(X).
?- no_self_loop(X).

.kg use default
.kg drop test_self_ref
