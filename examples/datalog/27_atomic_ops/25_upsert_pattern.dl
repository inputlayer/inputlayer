% Test: Upsert pattern (insert or update)
% Expected: Insert new rows and update existing
% Category: 27_atomic_ops
% Priority: P2 - Atomic operations

.kg create test_upsert
.kg use test_upsert

+data[(1, "old1"), (2, "old2")].

?- data(Id, Val).

% Insert new data (some keys overlap)
+data[(2, "new2"), (3, "new3")].

?- data(Id, Val).

.kg use default
.kg drop test_upsert
