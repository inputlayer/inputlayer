// Test: Delete During View Evaluation
// Description: Tests behavior when base facts are deleted while views depend on them

.kg create test_del_view_n02t06
.kg use test_del_view_n02t06

// Insert initial data
+edge[(1,2), (2,3), (3,4), (4,5)]

// Define a view
path(X, Y) <- edge(X, Y)
path(X, Z) <- edge(X, Y), path(Y, Z)

// Query the view
?path(X, Y)

// Delete some base facts
-edge(2, 3)

// Query the view again - should reflect deletion
?path(X, Y)

// Delete more facts
-edge(3, 4)

// Query again
?path(X, Y)

// Cleanup
.kg use default
.kg drop test_del_view_n02t06
