// Test: Self-Loop Single Node
// Description: Tests recursive query with a single self-loop edge

.kg create test_self_loop_n09t94
.kg use test_self_loop_n09t94

// Single self-loop
+edge(1, 1)

// Transitive closure on self-loop
path(X, Y) <- edge(X, Y)
path(X, Z) <- path(X, Y), edge(Y, Z)

// Should only produce (1, 1)
?path(X, Y)

// Add another self-loop
+edge(2, 2)

?path(X, Y)

// Add a regular edge connecting them
+edge(1, 2)

?path(X, Y)

// Cleanup
.kg use default
.kg drop test_self_loop_n09t94
